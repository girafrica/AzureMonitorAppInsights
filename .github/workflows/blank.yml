name: Deploy Application

on:
  schedule:
    # Default daily scheduled run. Feel free to change this to run when you want it to.
    - cron: '*/5 * * * *'

env:
        PR_NUMBER: "456"
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Install GitVersion
        uses: gittools/actions/gitversion/setup@v0
        with:
          versionSpec: '5.x'

      - name: Checkout
        uses: actions/checkout@v2
        with:
          fetch-depth: 0

      - name: Determine Version
        id:   gitversion  
        uses: gittools/actions/gitversion/execute@v0

      - name: Create Git tag for PR
        uses: actions/github-script@v4
        with:
          script: |
            github.git.createRef({
              owner: context.repo.owner,
              repo: context.repo.repo,
              ref: "refs/tags/0.0.0-pr${{ steps.gitversion.outputs.majorMinorPatch }}"",
              sha: context.sha
            })